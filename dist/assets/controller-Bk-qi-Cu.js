import{n as w,e as v}from"./utils-BfK-AAWY.js";function b(m){let{swiper:e,extendParams:h,on:f}=m;h({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function p(s,i){const o=function(){let l,n,c;return(u,g)=>{for(n=-1,l=u.length;l-n>1;)c=l+n>>1,u[c]<=g?n=c:l=c;return l}}();this.x=s,this.y=i,this.lastIndex=s.length-1;let t,r;return this.interpolate=function(l){return l?(r=o(this.x,l),t=r-1,(l-this.x[t])*(this.y[r]-this.y[t])/(this.x[r]-this.x[t])+this.y[t]):0},this}function T(s){e.controller.spline=e.params.loop?new p(e.slidesGrid,s.slidesGrid):new p(e.snapGrid,s.snapGrid)}function y(s,i){const o=e.controller.control;let t,r;const a=e.constructor;function l(n){if(n.destroyed)return;const c=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(T(n),r=-e.controller.spline.interpolate(-c)),(!r||e.params.controller.by==="container")&&(t=(n.maxTranslate()-n.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(t)||!Number.isFinite(t))&&(t=1),r=(c-e.minTranslate())*t+n.minTranslate()),e.params.controller.inverse&&(r=n.maxTranslate()-r),n.updateProgress(r),n.setTranslate(r,e),n.updateActiveIndex(),n.updateSlidesClasses()}if(Array.isArray(o))for(let n=0;n<o.length;n+=1)o[n]!==i&&o[n]instanceof a&&l(o[n]);else o instanceof a&&i!==o&&l(o)}function x(s,i){const o=e.constructor,t=e.controller.control;let r;function a(l){l.destroyed||(l.setTransition(s,e),s!==0&&(l.transitionStart(),l.params.autoHeight&&w(()=>{l.updateAutoHeight()}),v(l.wrapperEl,()=>{t&&l.transitionEnd()})))}if(Array.isArray(t))for(r=0;r<t.length;r+=1)t[r]!==i&&t[r]instanceof o&&a(t[r]);else t instanceof o&&i!==t&&a(t)}function d(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}f("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(i=>{if(e.controller.control||(e.controller.control=[]),i&&i.swiper)e.controller.control.push(i.swiper);else if(i){const o=`${e.params.eventsPrefix}init`,t=r=>{e.controller.control.push(r.detail[0]),e.update(),i.removeEventListener(o,t)};i.addEventListener(o,t)}});return}e.controller.control=e.params.controller.control}),f("update",()=>{d()}),f("resize",()=>{d()}),f("observerUpdate",()=>{d()}),f("setTranslate",(s,i,o)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(i,o)}),f("setTransition",(s,i,o)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(i,o)}),Object.assign(e.controller,{setTranslate:y,setTransition:x})}export{b as C};
