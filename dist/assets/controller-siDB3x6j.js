import{n as g,e as S}from"./utils-BHhRRxwJ.js";function b(m){let{swiper:e,extendParams:T,on:f}=m;T({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function p(i,s){const o=function(){let r,n,c;return(u,w)=>{for(n=-1,r=u.length;r-n>1;)c=r+n>>1,u[c]<=w?n=c:r=c;return r}}();this.x=i,this.y=s,this.lastIndex=i.length-1;let t,l;return this.interpolate=function(r){return r?(l=o(this.x,r),t=l-1,(r-this.x[t])*(this.y[l]-this.y[t])/(this.x[l]-this.x[t])+this.y[t]):0},this}function h(i){e.controller.spline=e.params.loop?new p(e.slidesGrid,i.slidesGrid):new p(e.snapGrid,i.snapGrid)}function y(i,s){const o=e.controller.control;let t,l;const a=e.constructor;function r(n){if(n.destroyed)return;const c=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(h(n),l=-e.controller.spline.interpolate(-c)),(!l||e.params.controller.by==="container")&&(t=(n.maxTranslate()-n.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(t)||!Number.isFinite(t))&&(t=1),l=(c-e.minTranslate())*t+n.minTranslate()),e.params.controller.inverse&&(l=n.maxTranslate()-l),n.updateProgress(l),n.setTranslate(l,e),n.updateActiveIndex(),n.updateSlidesClasses()}if(Array.isArray(o))for(let n=0;n<o.length;n+=1)o[n]!==s&&o[n]instanceof a&&r(o[n]);else o instanceof a&&s!==o&&r(o)}function x(i,s){const o=e.constructor,t=e.controller.control;let l;function a(r){r.destroyed||(r.setTransition(i,e),i!==0&&(r.transitionStart(),r.params.autoHeight&&g(()=>{r.updateAutoHeight()}),S(r.wrapperEl,()=>{t&&r.transitionEnd()})))}if(Array.isArray(t))for(l=0;l<t.length;l+=1)t[l]!==s&&t[l]instanceof o&&a(t[l]);else t instanceof o&&s!==t&&a(t)}function d(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}f("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){const i=document.querySelector(e.params.controller.control);if(i&&i.swiper)e.controller.control=i.swiper;else if(i){const s=o=>{e.controller.control=o.detail[0],e.update(),i.removeEventListener("init",s)};i.addEventListener("init",s)}return}e.controller.control=e.params.controller.control}),f("update",()=>{d()}),f("resize",()=>{d()}),f("observerUpdate",()=>{d()}),f("setTranslate",(i,s,o)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(s,o)}),f("setTransition",(i,s,o)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(s,o)}),Object.assign(e.controller,{setTranslate:y,setTransition:x})}export{b as C};
